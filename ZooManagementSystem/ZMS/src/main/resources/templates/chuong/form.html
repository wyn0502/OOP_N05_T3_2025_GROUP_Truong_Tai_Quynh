<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title th:text="${chuong.maChuong == ''} ? 'Thêm Chuồng' : 'Chỉnh Sửa Chuồng'">Chuồng</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
</head>
<body class="bg-light">

<div class="container my-5" style="max-width: 520px;">
  <h2 class="text-center text-success mb-4">
    <i class="fas fa-house-damage fa-lg me-2"></i>
    <span th:text="${chuong.maChuong == ''} ? 'Thêm Chuồng Mới' : 'Chỉnh Sửa Chuồng'">Thêm Chuồng Mới</span>
  </h2>

  <!-- Alert báo lỗi nếu có -->
  <div th:if="${error}" class="alert alert-danger mb-4" th:text="${error}"></div>

  <form th:action="@{/chuong/luu}" th:object="${chuong}" method="post" novalidate id="chuongForm">
    <input type="hidden" th:field="*{maChuong}" />
    <input type="hidden" th:if="${originalMaChuong != null}" name="originalMaChuong" th:value="${originalMaChuong}" />

    <!-- Mã chuồng -->
    <div class="mb-3">
      <label for="maChuong" class="form-label fw-semibold">
        <i class="fas fa-barcode me-2"></i>Mã chuồng
      </label>
      <input type="text" class="form-control" id="maChuong" th:field="*{maChuong}" placeholder="Nhập mã chuồng" th:readonly="${originalMaChuong != null}">
      <div class="invalid-feedback">Vui lòng nhập mã chuồng.</div>
    </div>
    <!-- Tên khu vực -->
    <div class="mb-3">
      <label for="tenKhuVuc" class="form-label fw-semibold">
        <i class="fas fa-map-marker-alt me-2"></i>Tên khu vực
      </label>
      <input type="text" class="form-control" id="tenKhuVuc" th:field="*{tenKhuVuc}" placeholder="Nhập tên khu vực" required />
      <div class="invalid-feedback">Vui lòng nhập tên khu vực.</div>
    </div>
    <!-- Sức chứa tối đa -->
    <div class="mb-3">
      <label for="sucChua" class="form-label fw-semibold">
        <i class="fas fa-users me-2"></i>Sức chứa tối đa
      </label>
      <input type="number" class="form-control" id="sucChua" th:field="*{sucChuaToiDa}" placeholder="Nhập sức chứa tối đa" min="1" required />
      <div class="invalid-feedback">Vui lòng nhập sức chứa lớn hơn 0.</div>
    </div>
    <!-- Số lượng hiện tại -->
    <div class="mb-3">
      <label for="soLuong" class="form-label fw-semibold">
        <i class="fas fa-dog me-2"></i>Số lượng hiện tại
      </label>
      <input type="number" class="form-control" id="soLuong" th:field="*{soLuongHienTai}" placeholder="Nhập số lượng động vật hiện tại" min="0" required />
      <div class="invalid-feedback">Vui lòng nhập số lượng hiện tại (>= 0).</div>
    </div>
    <button type="submit" class="btn btn-success w-100 fw-semibold mb-2" id="submitBtn">
      <i class="fas fa-save me-2"></i>Lưu Lại
    </button>
    <div class="text-center">
      <a href="/chuong" class="text-success text-decoration-none fw-semibold">
        <i class="fas fa-arrow-left me-2"></i>Quay lại danh sách
      </a>
    </div>
  </form>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  (() => {
    'use strict';
    const form = document.getElementById('chuongForm');
    form.addEventListener('submit', function(event) {
      if (!form.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
      }
      form.classList.add('was-validated');
    }, false);
  })();
</script>
</body>
</html>
