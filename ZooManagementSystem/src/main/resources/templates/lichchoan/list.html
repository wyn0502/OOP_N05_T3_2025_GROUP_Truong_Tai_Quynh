<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Quáº£n lÃ½ Lá»‹ch Cho Ä‚n</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
  <style>
    body { background-color: #f8f9fa; }
    .page-title { color:#2c3e50; font-weight:bold; text-align:center; }
    .page-title i { color:#2c3e50; }
  </style>
</head>
<body>
<div class="container mt-4">

  <a href="/greeting" class="btn btn-outline-primary mb-3">â† Quay láº¡i Dashboard</a>

  <h2 class="page-title mb-4">
    <i class="bi bi-calendar-check-fill"></i> Quáº£n LÃ½ Lá»‹ch Cho Ä‚n
  </h2>
  <p class="text-center text-muted mb-4">Danh sÃ¡ch táº¥t cáº£ lá»‹ch cho Äƒn Ä‘Ã£ táº¡o</p>

  <!-- Chá»‰ admin má»›i tháº¥y cÃ¡c hÃ nh Ä‘á»™ng -->
  <div class="d-flex justify-content-center gap-2 mb-3"
       th:if="${session.loggedInUser != null and session.loggedInUser.role?.toLowerCase() == 'admin'}">
    <a href="/lichchoan/them" class="btn btn-success fw-bold">+ ThÃªm lá»‹ch má»›i</a>
    <a href="/lichchoan" class="btn btn-outline-danger fw-bold">ğŸ”„ LÃ m má»›i</a>
  </div>

  <table class="table table-striped table-bordered text-center align-middle">
    <thead class="table-success">
      <tr>
        <th>MÃ£ lá»‹ch</th>
        <th>Äá»™ng váº­t</th>
        <th>Thá»©c Äƒn</th>
        <th>NhÃ¢n viÃªn</th>
        <th>Thá»i gian</th>
        <th th:text="${session.loggedInUser != null && session.loggedInUser.role?.toLowerCase() == 'admin' ? 'HÃ nh Ä‘á»™ng' : ' '}"></th>
      </tr>
    </thead>
    <tbody>
      <tr th:each="lich : ${danhSachLich}">
        <td th:text="${lich.maLich}"></td>
        <td th:text="${lich.dongVat}"></td>
        <td th:text="${lich.thucAn}"></td>
        <td th:text="${lich.nhanVien}"></td>

        <td th:text="${#temporals.format(lich.thoiGian, 'dd/MM/yyyy HH:mm')}"></td>

     
        <td th:if="${session.loggedInUser != null and session.loggedInUser.role?.toLowerCase() == 'admin'}">
          <a th:href="@{/lichchoan/edit/{id}(id=${lich.maLich})}" class="btn btn-warning btn-sm me-1">
            <i class="bi bi-pencil-square"></i> Sá»­a
          </a>
          <a th:href="@{/lichchoan/delete/{id}(id=${lich.maLich})}"
             onclick="return confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a lá»‹ch nÃ y?');"
             class="btn btn-danger btn-sm">
            <i class="bi bi-trash"></i> XÃ³a
          </a>
        </td>
      
        <td th:if="${!(session.loggedInUser != null and session.loggedInUser.role?.toLowerCase() == 'admin')}"></td>
      </tr>

      <tr th:if="${#lists.isEmpty(danhSachLich)}">
        <td colspan="6" class="text-muted fst-italic">ChÆ°a cÃ³ lá»‹ch nÃ o Ä‘Æ°á»£c táº¡o.</td>
      </tr>
    </tbody>
  </table>
</div>
</body>
</html>
